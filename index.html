<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1" />
  <title>Critical Thinking Quiz — Misinformation</title>
  <style>
    /* --- CSS: clean, responsive UI --- */
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --muted:#9aa4b2;
      --accent:#7cdbb6;
      --accent-2:#6fb0ff;
      --danger:#ff6b6b;
      --success:#4ade80;
      --glass: rgba(255,255,255,0.03);
      --glass-2: rgba(255,255,255,0.02);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%}
    body{
      margin:0;
      background: linear-gradient(180deg,#071427 0%, #071e2b 100%);
      color: #e6eef6;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .container{
      width:100%;
      max-width:820px;
      background:linear-gradient(180deg,var(--card),#071627);
      border-radius:16px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.6);
      padding:26px;
      box-sizing:border-box;
      border:1px solid rgba(255,255,255,0.03);
    }
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{font-size:20px;margin:0}
    .muted{color:var(--muted);font-size:13px}
    .start-screen, .quiz-screen, .results-screen{margin-top:18px}
    .card{
      background:var(--glass);
      border-radius:12px;
      padding:18px;
      border:1px solid rgba(255,255,255,0.02);
    }

    /* progress */
    .progress-wrap{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .progress-bar{
      height:12px;
      background:var(--glass-2);
      border-radius:999px;
      overflow:hidden;
      flex:1;
      position:relative;
    }
    .progress-bar > i{
      position:absolute; left:0; top:0; bottom:0;
      width:0%;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      border-radius:999px;
      transition:width .45s ease;
      box-shadow:0 4px 14px rgba(112,200,255,0.12);
    }
    .meta{display:flex;gap:12px;align-items:center;font-size:14px}
    .score-bubble{
      background:rgba(255,255,255,0.03);
      padding:8px 12px;
      border-radius:999px;
      font-weight:600;
      color:var(--accent-2);
    }

    /* question */
    .question-area{margin-top:16px;min-height:120px;display:flex;flex-direction:column;justify:center}
    #question{font-size:20px;line-height:1.35}
    .feedback{
      margin-top:14px;
      font-weight:700;
      height:28px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .feedback.good{color:var(--success)}
    .feedback.bad{color:var(--danger)}

    /* buttons */
    .answers{display:flex;gap:12px;margin-top:16px}
    button.btn{
      flex:1;
      padding:12px 16px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-weight:700;
      font-size:15px;
      transition:transform .14s ease, opacity .12s ease;
      box-shadow: 0 4px 10px rgba(2,6,23,0.5);
    }
    button.btn:active{transform:translateY(1px)}
    button#trueBtn{background:linear-gradient(180deg,#1b7f50,#14884a); color:white}
    button#falseBtn{background:linear-gradient(180deg,#9b3b3b,#7b2a2a); color:white}
    button.btn[disabled]{opacity:0.6; cursor:not-allowed; transform:none}

    /* timer */
    .timer{
      padding:8px 12px;
      border-radius:999px;
      background:rgba(255,255,255,0.02);
      display:flex;
      gap:8px;
      align-items:center;
      font-weight:700;
      color:var(--muted);
    }
    .timer.warn{background:rgba(255,80,80,0.08); color:var(--danger); box-shadow:0 6px 20px rgba(255,80,80,0.06) inset}

    /* start screen */
    .start-controls{display:flex;gap:12px;align-items:center;margin-top:14px}
    .switch{
      display:inline-flex;align-items:center;gap:10px;
    }
    .switch input{transform:scale(1.2)}
    .start-btn{
      padding:10px 16px;border-radius:10px;border:0;font-weight:800;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#012;cursor:pointer;font-size:15px
    }

    /* results */
    .results-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
    .results-grid .card{padding:14px}
    .big-score{font-size:36px;font-weight:900;color:var(--accent-2)}
    .small-muted{color:var(--muted);font-size:13px}

    .question-breakdown{margin-top:12px;max-height:240px;overflow:auto;padding-right:6px}
    .q-row{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;margin-bottom:6px;background:rgba(255,255,255,0.01)}
    .q-row.correct{border-left:4px solid rgba(74,222,128,0.12)}
    .q-row.incorrect{border-left:4px solid rgba(255,107,107,0.12)}

    footer{margin-top:18px;display:flex;justify-content:space-between;align-items:center;gap:10px}
    .muted-small{color:var(--muted);font-size:13px}
    /* responsive */
    @media (max-width:560px){
      .results-grid{grid-template-columns:1fr}
      .question-area{min-height:140px}
    }
  </style>
</head>
<body>
  <div class="container" role="main">
    <header>
      <div>
        <h1>Critical Thinking Quiz — Online Misinformation</h1>
        <div class="muted">10 True/False questions • Learn to spot misinformation</div>
      </div>
      <div style="text-align:right">
        <div class="muted-small">Created for: TakeHomeTask</div>
        <div class="muted-small" id="top-time"> </div>
      </div>
    </header>

    <!-- START SCREEN -->
    <section class="start-screen card" id="startScreen">
      <p class="muted">Welcome! This short quiz checks common misconceptions about online information and trains critical thinking.</p>
      <div class="start-controls">
        <label class="switch">
          <input type="checkbox" id="timedToggle" />
          <span class="muted" style="font-weight:700">Timed mode (60s per question)</span>
        </label>
        <div style="flex:1"></div>
        <button class="start-btn" id="startBtn">Start Quiz</button>
      </div>
      <div style="margin-top:12px;" class="muted-small">Tip: When timed mode is ON, each question has a 60 second timer. If time runs out the question is auto-submitted as incorrect.</div>
    </section>

    <!-- QUIZ SCREEN -->
    <section class="quiz-screen" id="quizScreen" style="display:none">
      <div class="progress-wrap">
        <div class="meta">
          <div class="muted">Question</div>
          <div class="score-bubble" id="qIndex">1 / 10</div>
        </div>
        <div class="progress-bar" aria-hidden="true">
          <i id="progressFill"></i>
        </div>
        <div class="meta">
          <div class="timer" id="timerDisplay" style="display:none"><span id="timerNumber">60</span>s</div>
          <div class="score-bubble" id="scoreDisplay">Score: 0</div>
        </div>
      </div>

      <div class="card">
        <div class="question-area">
          <div id="question">Question text</div>
          <div class="feedback" id="feedback"></div>
        </div>

        <div class="answers" id="answers">
          <button class="btn" id="trueBtn" onclick="handleAnswer(true)">True</button>
          <button class="btn" id="falseBtn" onclick="handleAnswer(false)">False</button>
        </div>
      </div>
    </section>

    <!-- RESULTS SCREEN -->
    <section class="results-screen" id="resultsScreen" style="display:none">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
          <div>
            <div class="muted-small">Quiz Completed</div>
            <div class="big-score" id="finalPoints">0 / 100</div>
            <div class="muted-small" id="finalSummary">0 correct • 0 incorrect</div>
          </div>
          <div style="text-align:right">
            <div class="muted-small">Time taken</div>
            <div id="timeTaken" style="font-weight:800">00:00</div>
          </div>
        </div>

        <div class="results-grid">
          <div class="card">
            <div class="muted-small">Score breakdown</div>
            <div style="margin-top:10px;font-weight:800" id="percentCorrect">0%</div>
            <div class="muted-small" id="pointsFromCorrect">Points from correct answers: 0</div>
          </div>

          <div class="card">
            <div class="muted-small">Actions</div>
            <div style="margin-top:10px;display:flex;gap:10px">
              <button class="start-btn" id="restartBtn">Restart Quiz</button>
              <button id="reviewBtn" class="start-btn" style="background:transparent;color:var(--accent-2);border:1px solid rgba(255,255,255,0.04)">Review Answers</button>
            </div>
          </div>
        </div>

        <div class="question-breakdown" id="breakdownArea" style="display:none"></div>
      </div>
    </section>

    <footer>
      <div class="muted-small">Made with care — practice critical thinking!</div>
      <div class="muted-small" id="footerProgress"></div>
    </footer>
  </div>

  <script>
    /*******************************
     * Quiz data and configuration
     *******************************/
    const questions = [
      { q: "A video of snow in Bali must be real because many people reposted it.", answer: false, explain: "Popularity doesn't mean truth — videos can be edited or misattributed." },
      { q: "A screenshot forwarded from WhatsApp is always reliable.", answer: false, explain: "Screenshots are easy to fake or take out of context." },
      { q: "AI-generated news clips can look real even if they are fake.", answer: true, explain: "Generative AI can produce very convincing audio/video." },
      { q: "Information is trustworthy just because your friend shared it.", answer: false, explain: "Even friends can share false info; check sources." },
      { q: "A viral TikTok rumor about a celebrity passing away can be false.", answer: true, explain: "False celebrity death rumors often spread quickly." },
      { q: "If a video looks glitchy, it might be edited or AI-generated.", answer: true, explain: "Artifacts or glitches can indicate manipulation." },
      { q: "Wikipedia can be edited by anyone, so it can contain mistakes.", answer: true, explain: "Wikipedia is useful but can contain inaccuracies." },
      { q: "If many Instagram pages post the same claim, it must be true.", answer: false, explain: "Echo chambers can spread the same false claim widely." },
      { q: "Fake news often spreads faster than real news.", answer: true, explain: "Studies show sensational falsehoods often spread quickly." },
      { q: "You should always check a second source before believing online information.", answer: true, explain: "Cross-checking reduces risk of misinformation." }
    ];

    const POINTS_PER = 10;
    const PER_QUESTION_TIME = 60; // seconds
    const WARNING_SECONDS = 10;

    /*******************************
     * State
     *******************************/
    let timedMode = false;
    let index = 0;
    let score = 0;
    let correctCount = 0;
    let incorrectCount = 0;
    let answersRecord = []; // { chosen, correct }
    let perQuestionTimer = null;
    let remainingSeconds = PER_QUESTION_TIME;
    let quizStartTS = null;
    let totalTimeMs = 0;
    let autoAdvanceDelay = 800; // ms

    // Elements
    const startScreen = document.getElementById('startScreen');
    const quizScreen = document.getElementById('quizScreen');
    const resultsScreen = document.getElementById('resultsScreen');
    const questionEl = document.getElementById('question');
    const feedbackEl = document.getElementById('feedback');
    const qIndexEl = document.getElementById('qIndex');
    const progressFill = document.getElementById('progressFill');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const timerDisplay = document.getElementById('timerDisplay');
    const timerNumber = document.getElementById('timerNumber');
    const trueBtn = document.getElementById('trueBtn');
    const falseBtn = document.getElementById('falseBtn');
    const startBtn = document.getElementById('startBtn');
    const timedToggle = document.getElementById('timedToggle');
    const finalPoints = document.getElementById('finalPoints');
    const finalSummary = document.getElementById('finalSummary');
    const percentCorrect = document.getElementById('percentCorrect');
    const pointsFromCorrect = document.getElementById('pointsFromCorrect');
    const timeTakenEl = document.getElementById('timeTaken');
    const restartBtn = document.getElementById('restartBtn');
    const reviewBtn = document.getElementById('reviewBtn');
    const breakdownArea = document.getElementById('breakdownArea');
    const footerProgress = document.getElementById('footerProgress');
    const topTime = document.getElementById('top-time');

    // init start UI
    timedToggle.checked = false;
    timerDisplay.style.display = 'none';
    topTime.textContent = '';

    /*******************************
     * Helpers
     *******************************/
    function formatTime(ms) {
      const total = Math.floor(ms / 1000);
      const min = Math.floor(total / 60);
      const sec = total % 60;
      return `${String(min).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
    }

    function setProgress(i) {
      const pct = Math.round((i / questions.length) * 100);
      progressFill.style.width = pct + '%';
      qIndexEl.textContent = `${Math.min(i+1,questions.length) } / ${questions.length}`;
      footerProgress.textContent = `Progress: ${pct}%`;
    }

    function disableButtons(state) {
      trueBtn.disabled = state;
      falseBtn.disabled = state;
    }

    function showFeedback(isCorrect, message) {
      feedbackEl.className = 'feedback ' + (isCorrect ? 'good' : 'bad');
      feedbackEl.textContent = message;
    }

    function clearFeedback() {
      feedbackEl.className = 'feedback';
      feedbackEl.textContent = '';
    }

    /*******************************
     * Timer logic
     *******************************/
    function startPerQuestionTimer() {
      if (!timedMode) return;
      remainingSeconds = PER_QUESTION_TIME;
      timerNumber.textContent = remainingSeconds;
      timerDisplay.style.display = 'inline-flex';
      timerDisplay.classList.remove('warn');

      perQuestionTimer = setInterval(() => {
        remainingSeconds--;
        timerNumber.textContent = remainingSeconds;
        if (remainingSeconds <= WARNING_SECONDS) {
          timerDisplay.classList.add('warn');
        }
        if (remainingSeconds <= 0) {
          clearInterval(perQuestionTimer);
          perQuestionTimer = null;
          // auto-submit wrong answer
          handleAnswer(null, true); // null means timed-out auto-submission
        }
      }, 1000);
    }

    function stopPerQuestionTimer() {
      if (perQuestionTimer) {
        clearInterval(perQuestionTimer);
        perQuestionTimer = null;
      }
      timerDisplay.style.display = timedMode ? 'inline-flex' : 'none';
      timerDisplay.classList.remove('warn');
    }

    /*******************************
     * Core quiz functions
     *******************************/
    function loadQuestion() {
      // safety: clamp index
      if (index >= questions.length) return finishQuiz();

      setProgress(index);
      questionEl.textContent = questions[index].q;
      clearFeedback();
      disableButtons(false);
      scoreDisplay.textContent = `Score: ${score}`;
      // reset timer for this question (if timed)
      stopPerQuestionTimer();
      if (timedMode) startPerQuestionTimer();
    }

    function handleAnswer(userChoice, isAutoTimeout = false) {
      // prevent double submit
      if (trueBtn.disabled && falseBtn.disabled) return;
      disableButtons(true);

      // if timer auto-triggered, treat as incorrect (userChoice === null)
      const correct = questions[index].answer;
      let wasCorrect = false;
      if (!isAutoTimeout && (userChoice === correct)) {
        wasCorrect = true;
      } else {
        wasCorrect = false;
      }

      // record and update score
      answersRecord.push({
        q: questions[index].q,
        chosen: (userChoice === true ? 'True' : userChoice === false ? 'False' : 'No answer (timed out)'),
        correct: correct ? 'True' : 'False',
        isCorrect: wasCorrect,
        explanation: questions[index].explain || ''
      });

      if (wasCorrect) {
        score += POINTS_PER;
        correctCount++;
        showFeedback(true, 'Correct!');
      } else {
        incorrectCount++;
        showFeedback(false, 'Incorrect');
      }

      // update UI score immediately
      scoreDisplay.textContent = `Score: ${score}`;

      // stop timer for current question
      stopPerQuestionTimer();

      // move next after short delay (auto-advance)
      index++;
      if (index < questions.length) {
        setTimeout(() => {
          loadQuestion();
        }, autoAdvanceDelay);
      } else {
        // finalize after brief delay so user sees final feedback
        setTimeout(() => finishQuiz(), autoAdvanceDelay + 150);
      }
    }

    function finishQuiz() {
      // stop timers & compute time taken
      stopPerQuestionTimer();
      const endTS = performance.now();
      totalTimeMs = endTS - quizStartTS;

      // show results
      startScreen.style.display = 'none';
      quizScreen.style.display = 'none';
      resultsScreen.style.display = '';

      finalPoints.textContent = `${score} / ${questions.length * POINTS_PER}`;
      finalSummary.textContent = `${correctCount} correct • ${incorrectCount} incorrect`;
      percentCorrect.textContent = `${Math.round((correctCount / questions.length) * 100)}%`;
      pointsFromCorrect.textContent = `Points from correct answers: ${correctCount * POINTS_PER}`;
      timeTakenEl.textContent = formatTime(totalTimeMs);
      breakdownArea.innerHTML = '';

      // build breakdown
      answersRecord.forEach((r, i) => {
        const row = document.createElement('div');
        row.className = 'q-row ' + (r.isCorrect ? 'correct' : 'incorrect');
        row.innerHTML = `<div style="flex:1"><strong>Q${i+1}.</strong> ${r.q}</div>
                         <div style="margin-left:12px;text-align:right">
                           <div style="font-weight:700">${r.chosen}</div>
                           <div class="muted-small" style="font-size:12px">Correct: ${r.correct}</div>
                         </div>`;
        breakdownArea.appendChild(row);

        // explanation block
        if (r.explanation) {
          const expl = document.createElement('div');
          expl.className = 'muted-small';
          expl.style.padding = '8px 10px';
          expl.style.fontSize = '13px';
          expl.style.color = 'var(--muted)';
          expl.style.marginBottom = '6px';
          expl.textContent = r.explanation;
          breakdownArea.appendChild(expl);
        }
      });

      // show summary controls
      breakdownArea.style.display = 'none';
    }

    function startQuiz() {
      // reset state
      timedMode = !!timedToggle.checked;
      index = 0;
      score = 0;
      correctCount = 0;
      incorrectCount = 0;
      answersRecord = [];
      quizStartTS = performance.now();
      totalTimeMs = 0;

      // UI state
      startScreen.style.display = 'none';
      resultsScreen.style.display = 'none';
      quizScreen.style.display = '';
      timerDisplay.style.display = timedMode ? 'inline-flex' : 'none';
      setProgress(0);
      scoreDisplay.textContent = `Score: ${score}`;
      topTime.textContent = timedMode ? 'Timed mode ON (60s/q)' : '';

      loadQuestion();
    }

    function restartQuiz() {
      // hide results and go back to start screen with toggled timed mode preserved
      startScreen.style.display = '';
      quizScreen.style.display = 'none';
      resultsScreen.style.display = 'none';
      breakdownArea.style.display = 'none';
      // keep timedToggle as is
      stopPerQuestionTimer();
      clearFeedback();
      scoreDisplay.textContent = `Score: 0`;
    }

    // event bindings
    startBtn.addEventListener('click', startQuiz);
    restartBtn.addEventListener('click', () => {
      // reset the UI and if user wants to restart immediately, they can Start again
      restartQuiz();
    });

    reviewBtn.addEventListener('click', () => {
      // toggle breakdown
      if (breakdownArea.style.display === 'none' || breakdownArea.style.display === '') {
        breakdownArea.style.display = '';
        reviewBtn.textContent = 'Hide Review';
      } else {
        breakdownArea.style.display = 'none';
        reviewBtn.textContent = 'Review Answers';
      }
    });

    // keyboard accessibility: T/F with keys
    window.addEventListener('keydown', (e) => {
      if (quizScreen.style.display === '' ) {
        if ((e.key === 't' || e.key === 'T' || e.key === 'ArrowLeft') && !trueBtn.disabled) {
          handleAnswer(true);
        } else if ((e.key === 'f' || e.key === 'F' || e.key === 'ArrowRight') && !falseBtn.disabled) {
          handleAnswer(false);
        }
      }
    });

    // expose handle for onclick in HTML (already defined as global)
    window.handleAnswer = handleAnswer;

    // optional: show start info time
    (function showBuildInfo(){
      const d = new Date();
      topTime.textContent = `Local time: ${d.toLocaleString()}`;
    })();

    // Accessibility: set focus to start button
    startBtn.focus();

  </script>
</body>
</html>
